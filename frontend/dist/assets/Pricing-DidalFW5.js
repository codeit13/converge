import{k as W,aA as Z,s as ee,j as w,o as l,w as r,v as _,A as D,y as a,P as se,L,a4 as te,a5 as oe,a6 as ie,aB as le,D as T,d as n,aC as ue,aD as de,M as I,aE as ce,f as i,X as pe,aF as fe,a7 as ae,c as p,n as E,_ as me,a as O,e as P,F as k,i as C,t as d,g as u,b,x as he}from"./index-BEXXmzFv.js";import{_ as Y}from"./Select-54bKIvxi.js";import{_ as G,a as K,b as X,c as S}from"./SelectValue-Bk171Di9.js";import{_ as J}from"./index-CWM2TQBZ.js";import{_ as z}from"./Label-T96GMOLp.js";import{_ as Q}from"./Textarea-a3Nx4Io8.js";import{L as U}from"./loader-circle-BbTsXihw.js";import{C as ge}from"./circle-alert-CVrKvjTi.js";import{R as ye}from"./refresh-ccw-CauVf-4V.js";import"./clamp-Bivrka6k.js";const Pe=W({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(t){const e=t,s=Z();return ee(),(c,f)=>(l(),w(a(se),D(e,{id:a(s).titleId}),{default:r(()=>[_(c.$slots,"default")]),_:3},16,["id"]))}}),we=W({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(t){const e=t;ee();const s=Z();return(c,f)=>(l(),w(a(se),D(e,{id:a(s).descriptionId}),{default:r(()=>[_(c.$slots,"default")]),_:3},16,["id"]))}});/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=L("CircleArrowUpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=L("CircleCheckIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=L("ClipboardListIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),A={__name:"Dialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(t,{emit:e}){const f=te(t,e);return(g,m)=>(l(),w(a(le),oe(ie(a(f))),{default:r(()=>[_(g.$slots,"default")]),_:3},16))}},N={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=t,c=e,f=T(()=>{const{class:m,...h}=s;return h}),g=te(f,c);return(m,h)=>(l(),w(a(fe),null,{default:r(()=>[n(a(ue),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),n(a(de),D(a(g),{class:a(I)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s.class)}),{default:r(()=>[_(m.$slots,"default"),n(a(ce),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:r(()=>[n(a(pe),{class:"w-4 h-4"}),h[0]||(h[0]=i("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}},B={__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const e=t,s=T(()=>{const{class:f,...g}=e;return g}),c=ae(s);return(f,g)=>(l(),w(a(we),D(a(c),{class:a(I)("text-sm text-muted-foreground",e.class)}),{default:r(()=>[_(f.$slots,"default")]),_:3},16,["class"]))}},V={__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(t){const e=t;return(s,c)=>(l(),p("div",{class:E(a(I)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[_(s.$slots,"default")],2))}},F={__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(t){const e=t;return(s,c)=>(l(),p("div",{class:E(a(I)("flex flex-col gap-y-1.5 text-center sm:text-left",e.class))},[_(s.$slots,"default")],2))}},j={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const e=t,s=T(()=>{const{class:f,...g}=e;return g}),c=ae(s);return(f,g)=>(l(),w(a(Pe),D(a(c),{class:a(I)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:r(()=>[_(f.$slots,"default")]),_:3},16,["class"]))}},ve={class:"pricing-container max-w-6xl mx-auto px-4 py-8 sm:py-12"},ke={key:0,class:"space-y-6"},Ce={class:"flex justify-center items-center gap-3 mb-4"},Se={class:"grid md:grid-cols-3 gap-6"},$e={key:1,class:"max-w-md mx-auto text-center py-8 px-4 border rounded-xl bg-card"},xe={class:"text-muted-foreground mb-6"},De={key:2,class:"mb-12"},Ie={class:"max-w-3xl mx-auto rounded-xl border bg-card p-6 sm:p-8"},Re={class:"flex flex-col md:flex-row md:justify-between md:items-start gap-6"},qe={class:"space-y-4"},ze={class:"flex items-center gap-2"},Ue={class:"text-2xl font-bold"},Ae={class:"text-muted-foreground"},Ne={class:"font-medium text-foreground text-xl"},Be={key:0},Ve={key:0,class:"pt-2"},Fe={class:"space-y-2"},je={class:"space-y-6 sm:min-w-[200px]"},Ee={key:0,class:"space-y-2"},Le={class:"flex justify-between text-sm mb-1"},Te={class:"text-muted-foreground"},Me={class:"h-2 w-full bg-muted rounded-full overflow-hidden"},He={class:"text-xs text-muted-foreground"},Oe={class:"flex flex-col sm:flex-row gap-2 mt-4"},Ye={id:"plans-section",class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8"},Ge={key:0,class:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-primary text-primary-foreground text-sm font-medium rounded-full"},Ke={key:1,class:"absolute -top-3 right-4 px-3 py-1 bg-green-500 text-white text-sm font-medium rounded-full"},Xe={class:"p-6"},Je={class:"text-xl font-bold"},Qe={key:0,class:"text-sm text-muted-foreground mt-1"},We={class:"mt-3 flex items-baseline"},Ze={class:"text-3xl font-bold"},es={class:"ml-1 text-muted-foreground"},ss={class:"mt-6 space-y-3"},ts={key:0},as={key:0,class:"text-xs text-muted-foreground"},ns={class:"space-y-4 py-4"},rs={class:"space-y-2"},os={key:0,class:"space-y-2"},is={class:"py-4"},ls={class:"rounded-lg bg-muted p-4 flex items-center gap-3"},us={class:"p-2 rounded-full bg-green-100"},ds={class:"font-medium"},cs={class:"text-sm text-muted-foreground"},ps={class:"space-y-4 py-4"},fs={class:"space-y-2"},ms={class:"space-y-2"},hs={class:"my-6 flex flex-col items-center space-y-4"},gs={class:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center"},ys={class:"space-y-2"},Ps={class:"text-lg font-semibold"},ws={class:"text-muted-foreground"},bs={class:"rounded-lg border bg-muted/50 p-4 my-4 text-sm"},_s={class:"space-y-1 pl-2"},vs={data(){return{processingPlans:{},selectedPlan:null,showCancelDialog:!1,showSuccessDialog:!1,showRefundDialog:!1,cancelReason:"",cancelComment:"",cancelInProgress:!1,refundPaymentId:"",refundReason:"",refundInProgress:!1,lastSuccessfulPlan:null,razorpayInstance:null}},computed:{...O("payments",["plans","isLoading","error","subscriptionStatus","paymentHistory"]),...O("auth",["user","currentProject"]),sortedPlans(){return!this.plans||!Array.isArray(this.plans)?[]:[...this.plans].sort((t,e)=>{if(t.position!==void 0&&e.position!==void 0)return t.position-e.position;const s=this.getPlanPrice(t)||0,c=this.getPlanPrice(e)||0;return s-c})},canCancel(){var t,e,s,c;return((t=this.subscriptionStatus)==null?void 0:t.status)!=="none"&&((e=this.subscriptionStatus)==null?void 0:e.currentPlan)!==null&&((c=(s=this.subscriptionStatus)==null?void 0:s.currentPlan)==null?void 0:c.cancellable)!==!1},refundablePayments(){var e;if(!((e=this.paymentHistory)!=null&&e.payments))return[];const t=new Date;return this.paymentHistory.payments.filter(s=>{const c=new Date(s.createdAt),f=Math.floor((t-c)/(1e3*60*60*24));return s.status==="success"&&!s.refunded&&f<=30})}},methods:{isEmpty(t){return!t||Object.keys(t).length===0},formatDate(t){if(!t)return"";const e=new Date(t);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(e)},formatExpiryDate(){const t=new Date;return t.setMonth(t.getMonth()+1),this.formatDate(t)},getUsagePercentage(){var t,e,s,c;return!((e=(t=this.subscriptionStatus)==null?void 0:t.usage)!=null&&e.current)||!((c=(s=this.subscriptionStatus)==null?void 0:s.usage)!=null&&c.limit)?0:Math.min(this.subscriptionStatus.usage.current/this.subscriptionStatus.usage.limit*100,100)},formatUsage(t){return!(t!=null&&t.current)||!(t!=null&&t.limit)?"No usage data":`${t.current.toLocaleString()} / ${t.limit.toLocaleString()} ${t.unit||"credits"}`},isCurrentPlan(t){var e;return(e=this.subscriptionStatus)!=null&&e.currentPlan?this.subscriptionStatus.currentPlan._id===t._id||this.subscriptionStatus.currentPlan.name===t.name:!1},getPlanPrice(t){return!(t!=null&&t.pricing)||!t.pricing.length?0:t.pricing[0].amount},getPlanCurrency(t){return!(t!=null&&t.pricing)||!t.pricing.length?"":t.pricing[0].currency},getPlanInterval(t){return!(t!=null&&t.pricing)||!t.pricing.length?"month":t.pricing[0].interval},getFeaturesList(t){return t!=null&&t.features?Array.isArray(t.features)&&t.features.length>0&&typeof t.features[0]=="string"?t.features:Array.isArray(t.features)?t.features.filter(e=>e&&e.included!==!1):[]:[]},getPlanButtonText(t){return this.processingPlans[t._id]?"Processing...":this.isCurrentPlan(t)?"Current Plan":t.free?"Get Started":"Subscribe"},scrollToPlans(){const t=document.getElementById("plans-section");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},async retryLoading(){this.$store.commit("payments/SET_ERROR",null),await this.$store.dispatch("payments/fetchPlans"),this.user&&await this.$store.dispatch("payments/getSubscriptionStatus")},async viewPaymentHistory(){await this.$store.dispatch("payments/getPaymentHistory"),this.$router.push("/payment-history")},async handleRefundRequestClick(){var t,e;(e=(t=this.paymentHistory)==null?void 0:t.payments)!=null&&e.length?this.showRefundDialog=!0:(await this.$store.dispatch("payments/getPaymentHistory"),this.showRefundDialog=!0)},async handleRefundRequest(){var t,e;if(!this.refundPaymentId||!this.refundReason){this.$store.dispatch("auth/showNotification",{type:"warning",message:"Please complete all fields"});return}try{this.refundInProgress=!0,await this.$store.dispatch("payments/initiateRefund",{paymentId:this.refundPaymentId,reason:this.refundReason}),await this.$store.dispatch("payments/getPaymentHistory"),this.$store.dispatch("auth/showNotification",{type:"success",message:"Refund request submitted successfully"}),this.showRefundDialog=!1,this.refundPaymentId="",this.refundReason=""}catch(s){this.$store.dispatch("auth/showNotification",{type:"error",message:((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to process refund"})}finally{this.refundInProgress=!1}},async handleCancelSubscription(){if(!this.cancelReason){this.$store.dispatch("auth/showNotification",{type:"warning",message:"Please select a reason for cancellation"});return}this.cancelInProgress=!0;try{await new Promise(t=>setTimeout(t,1e3)),await this.$store.dispatch("payments/getSubscriptionStatus"),this.$store.dispatch("auth/showNotification",{type:"success",message:"Subscription cancelled successfully"}),this.showCancelDialog=!1,this.cancelReason="",this.cancelComment=""}catch{}finally{this.cancelInProgress=!1}},goToDashboard(){this.showSuccessDialog=!1,this.$router.push("/")},async handlePurchase(t){var e,s,c,f,g;if(!this.user){this.$router.push("/auth/login");return}if(this.isCurrentPlan(t)){this.$store.dispatch("auth/showNotification",{type:"info",message:"You are already subscribed to this plan"});return}this.processingPlans={...this.processingPlans,[t._id]:!0},this.selectedPlan=t;try{if(!window.Razorpay)throw new Error("Payment gateway not loaded. Please refresh the page.");const m=await this.$store.dispatch("payments/createPayment",{planId:t._id,gateway:"razorpay"});if(!(m!=null&&m.status)||!((e=m==null?void 0:m.data)!=null&&e.payment))return;const h=m.data.payment,R=((s=this.currentProject)==null?void 0:s.name)||"Sales AI";if(!h.amount||!h.currency||!((c=h==null?void 0:h.gateway)!=null&&c.orderId))throw new Error("Invalid payment data received from server");const q={key:"rzp_test_zYGaoC25yks0Ob",amount:h.amount,currency:h.currency,name:R,description:`${t.name} Plan - ${this.getPlanInterval(t)}`,order_id:h.gateway.orderId,handler:async o=>{var y,$;try{if(!o.razorpay_payment_id||!o.razorpay_order_id||!o.razorpay_signature)throw new Error("Invalid payment response received");await this.$store.dispatch("payments/verifyPayment",{data:o,paymentId:h.paymentId}),await this.$store.dispatch("payments/getSubscriptionStatus"),this.lastSuccessfulPlan=t,this.showSuccessDialog=!0,this.$store.dispatch("auth/showNotification",{type:"success",message:"Payment successful! Your subscription is now active."})}catch(v){this.$store.dispatch("auth/showNotification",{type:"error",message:(($=(y=v==null?void 0:v.response)==null?void 0:y.data)==null?void 0:$.message)||v.message||"Payment verification failed"})}finally{this.processingPlans={...this.processingPlans,[t._id]:!1},this.selectedPlan=null,this.razorpayInstance&&(this.razorpayInstance=null)}},modal:{ondismiss:()=>{this.processingPlans={...this.processingPlans,[t._id]:!1},this.selectedPlan=null,this.$store.dispatch("auth/showNotification",{type:"info",message:"Payment cancelled"})}},prefill:{name:this.user.name,email:this.user.email,contact:this.user.phone||""},theme:{color:"hsl(var(--primary))"}};this.razorpayInstance=new window.Razorpay(q),this.razorpayInstance.open()}catch(m){this.$store.dispatch("auth/showNotification",{type:"error",message:((g=(f=m==null?void 0:m.response)==null?void 0:f.data)==null?void 0:g.message)||m.message||"Failed to create payment"}),this.processingPlans={...this.processingPlans,[t._id]:!1},this.selectedPlan=null}}},async mounted(){try{if(this.processingPlans={},await this.$store.dispatch("payments/fetchPlans"),this.user&&(await this.$store.dispatch("payments/getPaymentHistory"),await this.$store.dispatch("payments/getSubscriptionStatus")),!window.Razorpay){const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.async=!0,t.onerror=()=>{this.$store.dispatch("auth/showNotification",{type:"error",message:"Failed to load payment gateway. Please refresh the page."})},document.body.appendChild(t)}}catch(t){console.error("Error loading pricing data:",t),this.$store.dispatch("auth/showNotification",{type:"error",message:"Failed to load subscription data. Please try again later."})}}},ks=Object.assign(vs,{__name:"Pricing",setup(t){return(e,s)=>{var c,f,g,m,h,R,q;return l(),p("div",ve,[s[41]||(s[41]=i("div",{class:"text-center mb-8 sm:mb-12"},[i("h1",{class:"text-3xl sm:text-4xl font-bold mb-3"},"Subscription Plans"),i("p",{class:"text-muted-foreground max-w-2xl mx-auto"}," Power your sales and marketing with AI automation. Choose the plan that fits your business needs. ")],-1)),e.isLoading?(l(),p("div",ke,[i("div",Ce,[n(a(U),{class:"h-6 w-6 animate-spin text-primary"}),s[10]||(s[10]=i("span",null,"Loading subscription data...",-1))]),i("div",Se,[(l(),p(k,null,C(3,o=>i("div",{key:o,class:"h-[400px] rounded-xl border bg-card/30 animate-pulse"})),64))])])):e.error?(l(),p("div",$e,[n(a(ge),{class:"h-10 w-10 text-destructive mx-auto mb-4"}),s[12]||(s[12]=i("h3",{class:"text-xl font-semibold mb-2"},"Unable to Load Plans",-1)),i("p",xe,d(e.error),1),n(a(b),{onClick:e.retryLoading,class:"gap-2"},{default:r(()=>[n(a(ye),{class:"h-4 w-4"}),s[11]||(s[11]=u(" Try Again "))]),_:1},8,["onClick"])])):!e.isEmpty(e.subscriptionStatus)&&e.subscriptionStatus.status!=="none"?(l(),p("div",De,[i("div",Ie,[i("div",Re,[i("div",qe,[i("div",ze,[n(a(J),{variant:"outline",class:"px-3 py-1 text-sm"},{default:r(()=>s[13]||(s[13]=[u(" Active Subscription ")])),_:1}),(c=e.subscriptionStatus.currentPlan)!=null&&c.popular?(l(),w(a(J),{key:0,class:"bg-primary text-primary-foreground"},{default:r(()=>s[14]||(s[14]=[u(" Popular Plan ")])),_:1})):P("",!0)]),i("h3",Ue,d(((f=e.subscriptionStatus.currentPlan)==null?void 0:f.name)||"Current Plan"),1),i("p",Ae,[i("span",Ne,d((g=e.subscriptionStatus.currentPlan)==null?void 0:g.amount)+" "+d((m=e.subscriptionStatus.currentPlan)==null?void 0:m.currency),1),(h=e.subscriptionStatus.currentPlan)!=null&&h.interval?(l(),p("span",Be," /"+d(e.subscriptionStatus.currentPlan.interval),1)):P("",!0)]),(q=(R=e.subscriptionStatus.currentPlan)==null?void 0:R.features)!=null&&q.length?(l(),p("div",Ve,[s[15]||(s[15]=i("p",{class:"text-sm font-medium mb-2"},"Plan Features:",-1)),i("ul",Fe,[(l(!0),p(k,null,C(e.subscriptionStatus.currentPlan.features.slice(0,3),o=>(l(),p("li",{key:o,class:"flex items-center gap-2 text-sm"},[n(a(x),{class:"h-4 w-4 text-primary"}),i("span",null,d(o),1)]))),128))])])):P("",!0)]),i("div",je,[e.subscriptionStatus.usage?(l(),p("div",Ee,[i("div",Le,[s[16]||(s[16]=i("p",{class:"font-medium"},"Usage",-1)),i("p",Te,d(Math.round(e.getUsagePercentage()))+"% used ",1)]),i("div",Me,[i("div",{class:E(["h-full transition-all",{"bg-green-500":e.getUsagePercentage()<70,"bg-amber-500":e.getUsagePercentage()>=70&&e.getUsagePercentage()<90,"bg-red-500":e.getUsagePercentage()>=90}]),style:he({width:`${e.getUsagePercentage()}%`})},null,6)]),i("p",He,d(e.formatUsage(e.subscriptionStatus.usage)),1)])):P("",!0),i("div",Oe,[n(a(b),{variant:"outline",class:"w-full sm:w-auto",onClick:e.viewPaymentHistory},{default:r(()=>[n(a(_e),{class:"h-4 w-4 mr-2"}),s[17]||(s[17]=u(" Payment History "))]),_:1},8,["onClick"]),n(a(b),{class:"w-full sm:w-auto",onClick:e.scrollToPlans},{default:r(()=>[n(a(be),{class:"h-4 w-4 mr-2"}),s[18]||(s[18]=u(" Upgrade "))]),_:1},8,["onClick"])])])])])])):P("",!0),i("div",Ye,[(l(!0),p(k,null,C(e.sortedPlans,o=>(l(),p("div",{key:o._id,class:E(["relative rounded-xl border bg-card shadow-sm transition-all hover:shadow-md",{"border-primary ring-1 ring-primary/20":o.isPopular}])},[o.isPopular?(l(),p("div",Ge," Most Popular ")):P("",!0),e.isCurrentPlan(o)?(l(),p("div",Ke," Current Plan ")):P("",!0),i("div",Xe,[i("h3",Je,d(o.displayName||o.name),1),o.description?(l(),p("p",Qe,d(o.description),1)):P("",!0),i("div",We,[i("span",Ze,d(e.getPlanPrice(o))+" "+d(e.getPlanCurrency(o)),1),i("span",es,"/"+d(e.getPlanInterval(o)),1)]),i("ul",ss,[(l(!0),p(k,null,C(e.getFeaturesList(o),y=>(l(),p("li",{key:typeof y=="string"?y:y._id,class:"flex items-start gap-2 text-sm"},[n(a(x),{class:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),i("div",null,[typeof y=="string"?(l(),p("span",ts,d(y),1)):(l(),p(k,{key:1},[i("span",null,d(y.name),1),y.description?(l(),p("p",as,d(y.description),1)):P("",!0)],64))])]))),128))]),n(a(b),{variant:o.popular?"default":"outline",class:"w-full mt-6",size:"lg",disabled:e.processingPlans[o._id]||e.isCurrentPlan(o),onClick:y=>e.handlePurchase(o)},{default:r(()=>[e.processingPlans[o._id]?(l(),w(a(U),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):P("",!0),u(" "+d(e.getPlanButtonText(o)),1)]),_:2},1032,["variant","disabled","onClick"])])],2))),128))]),n(a(A),{open:e.showCancelDialog,"onUpdate:open":s[3]||(s[3]=o=>e.showCancelDialog=o)},{default:r(()=>[n(a(N),{class:"sm:max-w-md"},{default:r(()=>[n(a(F),null,{default:r(()=>[n(a(j),null,{default:r(()=>s[19]||(s[19]=[u("Cancel Subscription")])),_:1}),n(a(B),null,{default:r(()=>s[20]||(s[20]=[u(" Are you sure you want to cancel your subscription? You'll continue to have access until the end of your current billing period. ")])),_:1})]),_:1}),i("div",ns,[i("div",rs,[n(a(z),{for:"reason"},{default:r(()=>s[21]||(s[21]=[u("Reason for cancellation")])),_:1}),n(a(Y),{modelValue:e.cancelReason,"onUpdate:modelValue":s[0]||(s[0]=o=>e.cancelReason=o)},{default:r(()=>[n(a(G),{id:"reason"},{default:r(()=>[n(a(K),{placeholder:"Select a reason"})]),_:1}),n(a(X),null,{default:r(()=>[n(a(S),{value:"too_expensive"},{default:r(()=>s[22]||(s[22]=[u("Too expensive")])),_:1}),n(a(S),{value:"not_using"},{default:r(()=>s[23]||(s[23]=[u("Not using the service")])),_:1}),n(a(S),{value:"missing_features"},{default:r(()=>s[24]||(s[24]=[u("Missing features")])),_:1}),n(a(S),{value:"found_alternative"},{default:r(()=>s[25]||(s[25]=[u("Found an alternative")])),_:1}),n(a(S),{value:"other"},{default:r(()=>s[26]||(s[26]=[u("Other reason")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),e.cancelReason==="other"?(l(),p("div",os,[n(a(z),{for:"comment"},{default:r(()=>s[27]||(s[27]=[u("Please specify")])),_:1}),n(a(Q),{id:"comment",modelValue:e.cancelComment,"onUpdate:modelValue":s[1]||(s[1]=o=>e.cancelComment=o),placeholder:"Tell us more..."},null,8,["modelValue"])])):P("",!0)]),n(a(V),{class:"flex sm:justify-between"},{default:r(()=>[n(a(b),{variant:"ghost",onClick:s[2]||(s[2]=o=>e.showCancelDialog=!1)},{default:r(()=>s[28]||(s[28]=[u(" Never mind ")])),_:1}),n(a(b),{variant:"destructive",onClick:e.handleCancelSubscription,disabled:e.cancelInProgress},{default:r(()=>[e.cancelInProgress?(l(),w(a(U),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):P("",!0),u(" "+d(e.cancelInProgress?"Processing...":"Cancel Subscription"),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),n(a(A),{open:e.showSuccessDialog,"onUpdate:open":s[4]||(s[4]=o=>e.showSuccessDialog=o)},{default:r(()=>[n(a(N),{class:"sm:max-w-md"},{default:r(()=>{var o;return[n(a(F),null,{default:r(()=>[n(a(j),null,{default:r(()=>s[29]||(s[29]=[u("Payment Successful!")])),_:1}),n(a(B),null,{default:r(()=>s[30]||(s[30]=[u(" Your subscription has been successfully activated. You now have access to all features of your selected plan. ")])),_:1})]),_:1}),i("div",is,[i("div",ls,[i("div",us,[n(a(x),{class:"h-6 w-6 text-green-600"})]),i("div",null,[i("p",ds,d(((o=e.lastSuccessfulPlan)==null?void 0:o.name)||"Your new plan")+" activated ",1),i("p",cs," Valid until "+d(e.formatExpiryDate()),1)])])]),n(a(V),null,{default:r(()=>[n(a(b),{onClick:e.goToDashboard},{default:r(()=>s[31]||(s[31]=[u("Go to Dashboard")])),_:1},8,["onClick"])]),_:1})]}),_:1})]),_:1},8,["open"]),n(a(A),{open:e.showRefundDialog,"onUpdate:open":s[8]||(s[8]=o=>e.showRefundDialog=o)},{default:r(()=>[n(a(N),null,{default:r(()=>[n(a(F),null,{default:r(()=>[n(a(j),null,{default:r(()=>s[32]||(s[32]=[u("Request Refund")])),_:1}),n(a(B),null,{default:r(()=>s[33]||(s[33]=[u(" Please provide details for your refund request. Refunds are processed according to our refund policy. ")])),_:1})]),_:1}),i("div",ps,[i("div",fs,[n(a(z),{for:"payment"},{default:r(()=>s[34]||(s[34]=[u("Payment")])),_:1}),n(a(Y),{modelValue:e.refundPaymentId,"onUpdate:modelValue":s[5]||(s[5]=o=>e.refundPaymentId=o)},{default:r(()=>[n(a(G),{id:"payment"},{default:r(()=>[n(a(K),{placeholder:"Select payment"})]),_:1}),n(a(X),null,{default:r(()=>[(l(!0),p(k,null,C(e.refundablePayments,o=>(l(),w(a(S),{key:o.id,value:o.id},{default:r(()=>[u(d(o.amount)+" "+d(o.currency)+" - "+d(e.formatDate(o.createdAt)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",ms,[n(a(z),{for:"refund-reason"},{default:r(()=>s[35]||(s[35]=[u("Reason for refund")])),_:1}),n(a(Q),{id:"refund-reason",modelValue:e.refundReason,"onUpdate:modelValue":s[6]||(s[6]=o=>e.refundReason=o),placeholder:"Please explain why you're requesting a refund"},null,8,["modelValue"])])]),n(a(V),null,{default:r(()=>[n(a(b),{variant:"ghost",onClick:s[7]||(s[7]=o=>e.showRefundDialog=!1)},{default:r(()=>s[36]||(s[36]=[u(" Cancel ")])),_:1}),n(a(b),{onClick:e.handleRefundRequest,disabled:e.refundInProgress||!e.refundPaymentId||!e.refundReason},{default:r(()=>[e.refundInProgress?(l(),w(a(U),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):P("",!0),u(" "+d(e.refundInProgress?"Processing...":"Submit Request"),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),n(a(A),{open:e.showSuccessDialog,"onUpdate:open":s[9]||(s[9]=o=>e.showSuccessDialog=o)},{default:r(()=>[n(a(N),{class:"sm:max-w-md text-center"},{default:r(()=>{var o,y,$,v,M,H;return[n(a(F),null,{default:r(()=>[n(a(j),{class:"text-center text-2xl"},{default:r(()=>s[37]||(s[37]=[u("Payment Successful!")])),_:1}),n(a(B),{class:"text-center"},{default:r(()=>s[38]||(s[38]=[u(" Thank you for subscribing to our service. ")])),_:1})]),_:1}),i("div",hs,[i("div",gs,[n(a(x),{class:"h-10 w-10 text-green-600"})]),i("div",ys,[i("h3",Ps,d((o=e.lastSuccessfulPlan)==null?void 0:o.name),1),i("p",ws,d((y=e.lastSuccessfulPlan)==null?void 0:y.pricing[0].amount)+" "+d(($=e.lastSuccessfulPlan)==null?void 0:$.pricing[0].currency)+"/"+d(((v=e.lastSuccessfulPlan)==null?void 0:v.pricing[0].interval)||"month"),1)])]),i("div",bs,[s[39]||(s[39]=i("p",{class:"mb-2 font-medium"},"Your subscription includes:",-1)),i("ul",_s,[(l(!0),p(k,null,C((H=(M=e.lastSuccessfulPlan)==null?void 0:M.features)==null?void 0:H.slice(0,3),(ne,re)=>(l(),p("li",{key:re,class:"flex items-center gap-2"},[n(a(x),{class:"h-3 w-3 text-green-600 flex-shrink-0"}),i("span",null,d(ne.name),1)]))),128))])]),n(a(V),null,{default:r(()=>[n(a(b),{class:"w-full",onClick:e.goToDashboard},{default:r(()=>s[40]||(s[40]=[u(" Go to Dashboard ")])),_:1},8,["onClick"])]),_:1})]}),_:1})]),_:1},8,["open"])])}}}),As=me(ks,[["__scopeId","data-v-6d426e56"]]);export{As as default};
