import{c as E,i as W,f as b,o as l,w as o,k as C,l as te,p as ae,u as a,s as ne,E as L,d as n,D as re,C as oe,q as j,P as D,al as ie,b as i,Y as le,Q as ue,am as Z,a as c,n as T,R as de,m as O,T as P,F as v,r as k,t as d,e as u,_ as w,H as ce}from"./index-Bf1OaKc9.js";import{a as pe,_ as fe}from"./DialogDescription-CZF19xnK.js";import{a as Y,_ as G}from"./Textarea-CclvJkX2.js";import{_ as K,a as Q,b as X,c as S}from"./SelectValue-B1nlqDQ6.js";import{_ as J}from"./index-CJ9eTXaf.js";import{_ as q}from"./Label-CWETHHVk.js";import{L as z,C as me}from"./loader-circle-9jiLZQI4.js";import{R as he}from"./refresh-ccw-Cc5Ku3lx.js";/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=E("CircleArrowUpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=E("CircleCheckIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=E("ClipboardListIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),U={__name:"Dialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(t,{emit:e}){const m=W(t,e);return(y,f)=>(l(),b(a(ne),te(ae(a(m))),{default:o(()=>[C(y.$slots,"default")]),_:3},16))}},N={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=t,p=e,m=L(()=>{const{class:f,...h}=s;return h}),y=W(m,p);return(f,h)=>(l(),b(a(ue),null,{default:o(()=>[n(a(re),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),n(a(oe),j(a(y),{class:a(D)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s.class)}),{default:o(()=>[C(f.$slots,"default"),n(a(ie),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:o(()=>[n(a(le),{class:"w-4 h-4"}),h[0]||(h[0]=i("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}},V={__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const e=t,s=L(()=>{const{class:m,...y}=e;return y}),p=Z(s);return(m,y)=>(l(),b(a(pe),j(a(p),{class:a(D)("text-sm text-muted-foreground",e.class)}),{default:o(()=>[C(m.$slots,"default")]),_:3},16,["class"]))}},A={__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(t){const e=t;return(s,p)=>(l(),c("div",{class:T(a(D)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",e.class))},[C(s.$slots,"default")],2))}},B={__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(t){const e=t;return(s,p)=>(l(),c("div",{class:T(a(D)("flex flex-col gap-y-1.5 text-center sm:text-left",e.class))},[C(s.$slots,"default")],2))}},F={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(t){const e=t,s=L(()=>{const{class:m,...y}=e;return y}),p=Z(s);return(m,y)=>(l(),b(a(fe),j(a(p),{class:a(D)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:o(()=>[C(m.$slots,"default")]),_:3},16,["class"]))}},Pe={class:"pricing-container max-w-6xl mx-auto px-4 py-8 sm:py-12"},we={key:0,class:"space-y-6"},be={class:"flex justify-center items-center gap-3 mb-4"},_e={class:"grid md:grid-cols-3 gap-6"},ve={key:1,class:"max-w-md mx-auto text-center py-8 px-4 border rounded-xl bg-card"},ke={class:"text-muted-foreground mb-6"},Se={key:2,class:"mb-12"},Ce={class:"max-w-3xl mx-auto rounded-xl border bg-card p-6 sm:p-8"},$e={class:"flex flex-col md:flex-row md:justify-between md:items-start gap-6"},xe={class:"space-y-4"},De={class:"flex items-center gap-2"},Ie={class:"text-2xl font-bold"},Re={class:"text-muted-foreground"},qe={class:"font-medium text-foreground text-xl"},ze={key:0},Ue={key:0,class:"pt-2"},Ne={class:"space-y-2"},Ve={class:"space-y-6 sm:min-w-[200px]"},Ae={key:0,class:"space-y-2"},Be={class:"flex justify-between text-sm mb-1"},Fe={class:"text-muted-foreground"},Te={class:"h-2 w-full bg-muted rounded-full overflow-hidden"},Ee={class:"text-xs text-muted-foreground"},Le={class:"flex flex-col sm:flex-row gap-2 mt-4"},je={id:"plans-section",class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8"},He={key:0,class:"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-primary text-primary-foreground text-sm font-medium rounded-full"},Me={key:1,class:"absolute -top-3 right-4 px-3 py-1 bg-green-500 text-white text-sm font-medium rounded-full"},Oe={class:"p-6"},Ye={class:"text-xl font-bold"},Ge={key:0,class:"text-sm text-muted-foreground mt-1"},Ke={class:"mt-3 flex items-baseline"},Qe={class:"text-3xl font-bold"},Xe={class:"ml-1 text-muted-foreground"},Je={class:"mt-6 space-y-3"},We={key:0},Ze={key:0,class:"text-xs text-muted-foreground"},es={class:"space-y-4 py-4"},ss={class:"space-y-2"},ts={key:0,class:"space-y-2"},as={class:"py-4"},ns={class:"rounded-lg bg-muted p-4 flex items-center gap-3"},rs={class:"p-2 rounded-full bg-green-100"},os={class:"font-medium"},is={class:"text-sm text-muted-foreground"},ls={class:"space-y-4 py-4"},us={class:"space-y-2"},ds={class:"space-y-2"},cs={class:"my-6 flex flex-col items-center space-y-4"},ps={class:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center"},fs={class:"space-y-2"},ms={class:"text-lg font-semibold"},hs={class:"text-muted-foreground"},ys={class:"rounded-lg border bg-muted/50 p-4 my-4 text-sm"},gs={class:"space-y-1 pl-2"},Ps={data(){return{processingPlans:{},selectedPlan:null,showCancelDialog:!1,showSuccessDialog:!1,showRefundDialog:!1,cancelReason:"",cancelComment:"",cancelInProgress:!1,refundPaymentId:"",refundReason:"",refundInProgress:!1,lastSuccessfulPlan:null,razorpayInstance:null}},computed:{...O("payments",["plans","isLoading","error","subscriptionStatus","paymentHistory"]),...O("auth",["user","currentProject"]),sortedPlans(){return!this.plans||!Array.isArray(this.plans)?[]:[...this.plans].sort((t,e)=>{if(t.position!==void 0&&e.position!==void 0)return t.position-e.position;const s=this.getPlanPrice(t)||0,p=this.getPlanPrice(e)||0;return s-p})},canCancel(){var t,e,s,p;return((t=this.subscriptionStatus)==null?void 0:t.status)!=="none"&&((e=this.subscriptionStatus)==null?void 0:e.currentPlan)!==null&&((p=(s=this.subscriptionStatus)==null?void 0:s.currentPlan)==null?void 0:p.cancellable)!==!1},refundablePayments(){var e;if(!((e=this.paymentHistory)!=null&&e.payments))return[];const t=new Date;return this.paymentHistory.payments.filter(s=>{const p=new Date(s.createdAt),m=Math.floor((t-p)/(1e3*60*60*24));return s.status==="success"&&!s.refunded&&m<=30})}},methods:{isEmpty(t){return!t||Object.keys(t).length===0},formatDate(t){if(!t)return"";const e=new Date(t);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(e)},formatExpiryDate(){const t=new Date;return t.setMonth(t.getMonth()+1),this.formatDate(t)},getUsagePercentage(){var t,e,s,p;return!((e=(t=this.subscriptionStatus)==null?void 0:t.usage)!=null&&e.current)||!((p=(s=this.subscriptionStatus)==null?void 0:s.usage)!=null&&p.limit)?0:Math.min(this.subscriptionStatus.usage.current/this.subscriptionStatus.usage.limit*100,100)},formatUsage(t){return!(t!=null&&t.current)||!(t!=null&&t.limit)?"No usage data":`${t.current.toLocaleString()} / ${t.limit.toLocaleString()} ${t.unit||"credits"}`},isCurrentPlan(t){var e;return(e=this.subscriptionStatus)!=null&&e.currentPlan?this.subscriptionStatus.currentPlan._id===t._id||this.subscriptionStatus.currentPlan.name===t.name:!1},getPlanPrice(t){return!(t!=null&&t.pricing)||!t.pricing.length?0:t.pricing[0].amount},getPlanCurrency(t){return!(t!=null&&t.pricing)||!t.pricing.length?"":t.pricing[0].currency},getPlanInterval(t){return!(t!=null&&t.pricing)||!t.pricing.length?"month":t.pricing[0].interval},getFeaturesList(t){return t!=null&&t.features?Array.isArray(t.features)&&t.features.length>0&&typeof t.features[0]=="string"?t.features:Array.isArray(t.features)?t.features.filter(e=>e&&e.included!==!1):[]:[]},getPlanButtonText(t){return this.processingPlans[t._id]?"Processing...":this.isCurrentPlan(t)?"Current Plan":t.free?"Get Started":"Subscribe"},scrollToPlans(){const t=document.getElementById("plans-section");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},async retryLoading(){this.$store.commit("payments/SET_ERROR",null),await this.$store.dispatch("payments/fetchPlans"),this.user&&await this.$store.dispatch("payments/getSubscriptionStatus")},async viewPaymentHistory(){await this.$store.dispatch("payments/getPaymentHistory"),this.$router.push("/payment-history")},async handleRefundRequestClick(){var t,e;(e=(t=this.paymentHistory)==null?void 0:t.payments)!=null&&e.length?this.showRefundDialog=!0:(await this.$store.dispatch("payments/getPaymentHistory"),this.showRefundDialog=!0)},async handleRefundRequest(){var t,e;if(!this.refundPaymentId||!this.refundReason){this.$store.dispatch("auth/showNotification",{type:"warning",message:"Please complete all fields"});return}try{this.refundInProgress=!0,await this.$store.dispatch("payments/initiateRefund",{paymentId:this.refundPaymentId,reason:this.refundReason}),await this.$store.dispatch("payments/getPaymentHistory"),this.$store.dispatch("auth/showNotification",{type:"success",message:"Refund request submitted successfully"}),this.showRefundDialog=!1,this.refundPaymentId="",this.refundReason=""}catch(s){this.$store.dispatch("auth/showNotification",{type:"error",message:((e=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to process refund"})}finally{this.refundInProgress=!1}},async handleCancelSubscription(){if(!this.cancelReason){this.$store.dispatch("auth/showNotification",{type:"warning",message:"Please select a reason for cancellation"});return}this.cancelInProgress=!0;try{await new Promise(t=>setTimeout(t,1e3)),await this.$store.dispatch("payments/getSubscriptionStatus"),this.$store.dispatch("auth/showNotification",{type:"success",message:"Subscription cancelled successfully"}),this.showCancelDialog=!1,this.cancelReason="",this.cancelComment=""}catch{}finally{this.cancelInProgress=!1}},goToDashboard(){this.showSuccessDialog=!1,this.$router.push("/")},async handlePurchase(t){var e,s,p,m,y;if(!this.user){this.$router.push("/auth/login");return}if(this.isCurrentPlan(t)){this.$store.dispatch("auth/showNotification",{type:"info",message:"You are already subscribed to this plan"});return}this.processingPlans={...this.processingPlans,[t._id]:!0},this.selectedPlan=t;try{if(!window.Razorpay)throw new Error("Payment gateway not loaded. Please refresh the page.");const f=await this.$store.dispatch("payments/createPayment",{planId:t._id,gateway:"razorpay"});if(!(f!=null&&f.status)||!((e=f==null?void 0:f.data)!=null&&e.payment))return;const h=f.data.payment,I=((s=this.currentProject)==null?void 0:s.name)||"Sales AI";if(!h.amount||!h.currency||!((p=h==null?void 0:h.gateway)!=null&&p.orderId))throw new Error("Invalid payment data received from server");const R={key:"rzp_test_zYGaoC25yks0Ob",amount:h.amount,currency:h.currency,name:I,description:`${t.name} Plan - ${this.getPlanInterval(t)}`,order_id:h.gateway.orderId,handler:async r=>{var g,$;try{if(!r.razorpay_payment_id||!r.razorpay_order_id||!r.razorpay_signature)throw new Error("Invalid payment response received");await this.$store.dispatch("payments/verifyPayment",{data:r,paymentId:h.paymentId}),await this.$store.dispatch("payments/getSubscriptionStatus"),this.lastSuccessfulPlan=t,this.showSuccessDialog=!0,this.$store.dispatch("auth/showNotification",{type:"success",message:"Payment successful! Your subscription is now active."})}catch(_){this.$store.dispatch("auth/showNotification",{type:"error",message:(($=(g=_==null?void 0:_.response)==null?void 0:g.data)==null?void 0:$.message)||_.message||"Payment verification failed"})}finally{this.processingPlans={...this.processingPlans,[t._id]:!1},this.selectedPlan=null,this.razorpayInstance&&(this.razorpayInstance=null)}},modal:{ondismiss:()=>{this.processingPlans={...this.processingPlans,[t._id]:!1},this.selectedPlan=null,this.$store.dispatch("auth/showNotification",{type:"info",message:"Payment cancelled"})}},prefill:{name:this.user.name,email:this.user.email,contact:this.user.phone||""},theme:{color:"hsl(var(--primary))"}};this.razorpayInstance=new window.Razorpay(R),this.razorpayInstance.open()}catch(f){this.$store.dispatch("auth/showNotification",{type:"error",message:((y=(m=f==null?void 0:f.response)==null?void 0:m.data)==null?void 0:y.message)||f.message||"Failed to create payment"}),this.processingPlans={...this.processingPlans,[t._id]:!1},this.selectedPlan=null}}},async mounted(){try{if(this.processingPlans={},await this.$store.dispatch("payments/fetchPlans"),this.user&&(await this.$store.dispatch("payments/getPaymentHistory"),await this.$store.dispatch("payments/getSubscriptionStatus")),!window.Razorpay){const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.async=!0,t.onerror=()=>{this.$store.dispatch("auth/showNotification",{type:"error",message:"Failed to load payment gateway. Please refresh the page."})},document.body.appendChild(t)}}catch(t){console.error("Error loading pricing data:",t),this.$store.dispatch("auth/showNotification",{type:"error",message:"Failed to load subscription data. Please try again later."})}}},ws=Object.assign(Ps,{__name:"Pricing",setup(t){return(e,s)=>{var p,m,y,f,h,I,R;return l(),c("div",Pe,[s[41]||(s[41]=i("div",{class:"text-center mb-8 sm:mb-12"},[i("h1",{class:"text-3xl sm:text-4xl font-bold mb-3"},"Subscription Plans"),i("p",{class:"text-muted-foreground max-w-2xl mx-auto"}," Power your sales and marketing with AI automation. Choose the plan that fits your business needs. ")],-1)),e.isLoading?(l(),c("div",we,[i("div",be,[n(a(z),{class:"h-6 w-6 animate-spin text-primary"}),s[10]||(s[10]=i("span",null,"Loading subscription data...",-1))]),i("div",_e,[(l(),c(v,null,k(3,r=>i("div",{key:r,class:"h-[400px] rounded-xl border bg-card/30 animate-pulse"})),64))])])):e.error?(l(),c("div",ve,[n(a(me),{class:"h-10 w-10 text-destructive mx-auto mb-4"}),s[12]||(s[12]=i("h3",{class:"text-xl font-semibold mb-2"},"Unable to Load Plans",-1)),i("p",ke,d(e.error),1),n(a(w),{onClick:e.retryLoading,class:"gap-2"},{default:o(()=>[n(a(he),{class:"h-4 w-4"}),s[11]||(s[11]=u(" Try Again "))]),_:1},8,["onClick"])])):!e.isEmpty(e.subscriptionStatus)&&e.subscriptionStatus.status!=="none"?(l(),c("div",Se,[i("div",Ce,[i("div",$e,[i("div",xe,[i("div",De,[n(a(J),{variant:"outline",class:"px-3 py-1 text-sm"},{default:o(()=>s[13]||(s[13]=[u(" Active Subscription ")])),_:1}),(p=e.subscriptionStatus.currentPlan)!=null&&p.popular?(l(),b(a(J),{key:0,class:"bg-primary text-primary-foreground"},{default:o(()=>s[14]||(s[14]=[u(" Popular Plan ")])),_:1})):P("",!0)]),i("h3",Ie,d(((m=e.subscriptionStatus.currentPlan)==null?void 0:m.name)||"Current Plan"),1),i("p",Re,[i("span",qe,d((y=e.subscriptionStatus.currentPlan)==null?void 0:y.amount)+" "+d((f=e.subscriptionStatus.currentPlan)==null?void 0:f.currency),1),(h=e.subscriptionStatus.currentPlan)!=null&&h.interval?(l(),c("span",ze," /"+d(e.subscriptionStatus.currentPlan.interval),1)):P("",!0)]),(R=(I=e.subscriptionStatus.currentPlan)==null?void 0:I.features)!=null&&R.length?(l(),c("div",Ue,[s[15]||(s[15]=i("p",{class:"text-sm font-medium mb-2"},"Plan Features:",-1)),i("ul",Ne,[(l(!0),c(v,null,k(e.subscriptionStatus.currentPlan.features.slice(0,3),r=>(l(),c("li",{key:r,class:"flex items-center gap-2 text-sm"},[n(a(x),{class:"h-4 w-4 text-primary"}),i("span",null,d(r),1)]))),128))])])):P("",!0)]),i("div",Ve,[e.subscriptionStatus.usage?(l(),c("div",Ae,[i("div",Be,[s[16]||(s[16]=i("p",{class:"font-medium"},"Usage",-1)),i("p",Fe,d(Math.round(e.getUsagePercentage()))+"% used ",1)]),i("div",Te,[i("div",{class:T(["h-full transition-all",{"bg-green-500":e.getUsagePercentage()<70,"bg-amber-500":e.getUsagePercentage()>=70&&e.getUsagePercentage()<90,"bg-red-500":e.getUsagePercentage()>=90}]),style:ce({width:`${e.getUsagePercentage()}%`})},null,6)]),i("p",Ee,d(e.formatUsage(e.subscriptionStatus.usage)),1)])):P("",!0),i("div",Le,[n(a(w),{variant:"outline",class:"w-full sm:w-auto",onClick:e.viewPaymentHistory},{default:o(()=>[n(a(ge),{class:"h-4 w-4 mr-2"}),s[17]||(s[17]=u(" Payment History "))]),_:1},8,["onClick"]),n(a(w),{class:"w-full sm:w-auto",onClick:e.scrollToPlans},{default:o(()=>[n(a(ye),{class:"h-4 w-4 mr-2"}),s[18]||(s[18]=u(" Upgrade "))]),_:1},8,["onClick"])])])])])])):P("",!0),i("div",je,[(l(!0),c(v,null,k(e.sortedPlans,r=>(l(),c("div",{key:r._id,class:T(["relative rounded-xl border bg-card shadow-sm transition-all hover:shadow-md",{"border-primary ring-1 ring-primary/20":r.isPopular}])},[r.isPopular?(l(),c("div",He," Most Popular ")):P("",!0),e.isCurrentPlan(r)?(l(),c("div",Me," Current Plan ")):P("",!0),i("div",Oe,[i("h3",Ye,d(r.displayName||r.name),1),r.description?(l(),c("p",Ge,d(r.description),1)):P("",!0),i("div",Ke,[i("span",Qe,d(e.getPlanPrice(r))+" "+d(e.getPlanCurrency(r)),1),i("span",Xe,"/"+d(e.getPlanInterval(r)),1)]),i("ul",Je,[(l(!0),c(v,null,k(e.getFeaturesList(r),g=>(l(),c("li",{key:typeof g=="string"?g:g._id,class:"flex items-start gap-2 text-sm"},[n(a(x),{class:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),i("div",null,[typeof g=="string"?(l(),c("span",We,d(g),1)):(l(),c(v,{key:1},[i("span",null,d(g.name),1),g.description?(l(),c("p",Ze,d(g.description),1)):P("",!0)],64))])]))),128))]),n(a(w),{variant:r.popular?"default":"outline",class:"w-full mt-6",size:"lg",disabled:e.processingPlans[r._id]||e.isCurrentPlan(r),onClick:g=>e.handlePurchase(r)},{default:o(()=>[e.processingPlans[r._id]?(l(),b(a(z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):P("",!0),u(" "+d(e.getPlanButtonText(r)),1)]),_:2},1032,["variant","disabled","onClick"])])],2))),128))]),n(a(U),{open:e.showCancelDialog,"onUpdate:open":s[3]||(s[3]=r=>e.showCancelDialog=r)},{default:o(()=>[n(a(N),{class:"sm:max-w-md"},{default:o(()=>[n(a(B),null,{default:o(()=>[n(a(F),null,{default:o(()=>s[19]||(s[19]=[u("Cancel Subscription")])),_:1}),n(a(V),null,{default:o(()=>s[20]||(s[20]=[u(" Are you sure you want to cancel your subscription? You'll continue to have access until the end of your current billing period. ")])),_:1})]),_:1}),i("div",es,[i("div",ss,[n(a(q),{for:"reason"},{default:o(()=>s[21]||(s[21]=[u("Reason for cancellation")])),_:1}),n(a(Y),{modelValue:e.cancelReason,"onUpdate:modelValue":s[0]||(s[0]=r=>e.cancelReason=r)},{default:o(()=>[n(a(K),{id:"reason"},{default:o(()=>[n(a(Q),{placeholder:"Select a reason"})]),_:1}),n(a(X),null,{default:o(()=>[n(a(S),{value:"too_expensive"},{default:o(()=>s[22]||(s[22]=[u("Too expensive")])),_:1}),n(a(S),{value:"not_using"},{default:o(()=>s[23]||(s[23]=[u("Not using the service")])),_:1}),n(a(S),{value:"missing_features"},{default:o(()=>s[24]||(s[24]=[u("Missing features")])),_:1}),n(a(S),{value:"found_alternative"},{default:o(()=>s[25]||(s[25]=[u("Found an alternative")])),_:1}),n(a(S),{value:"other"},{default:o(()=>s[26]||(s[26]=[u("Other reason")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),e.cancelReason==="other"?(l(),c("div",ts,[n(a(q),{for:"comment"},{default:o(()=>s[27]||(s[27]=[u("Please specify")])),_:1}),n(a(G),{id:"comment",modelValue:e.cancelComment,"onUpdate:modelValue":s[1]||(s[1]=r=>e.cancelComment=r),placeholder:"Tell us more..."},null,8,["modelValue"])])):P("",!0)]),n(a(A),{class:"flex sm:justify-between"},{default:o(()=>[n(a(w),{variant:"ghost",onClick:s[2]||(s[2]=r=>e.showCancelDialog=!1)},{default:o(()=>s[28]||(s[28]=[u(" Never mind ")])),_:1}),n(a(w),{variant:"destructive",onClick:e.handleCancelSubscription,disabled:e.cancelInProgress},{default:o(()=>[e.cancelInProgress?(l(),b(a(z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):P("",!0),u(" "+d(e.cancelInProgress?"Processing...":"Cancel Subscription"),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),n(a(U),{open:e.showSuccessDialog,"onUpdate:open":s[4]||(s[4]=r=>e.showSuccessDialog=r)},{default:o(()=>[n(a(N),{class:"sm:max-w-md"},{default:o(()=>{var r;return[n(a(B),null,{default:o(()=>[n(a(F),null,{default:o(()=>s[29]||(s[29]=[u("Payment Successful!")])),_:1}),n(a(V),null,{default:o(()=>s[30]||(s[30]=[u(" Your subscription has been successfully activated. You now have access to all features of your selected plan. ")])),_:1})]),_:1}),i("div",as,[i("div",ns,[i("div",rs,[n(a(x),{class:"h-6 w-6 text-green-600"})]),i("div",null,[i("p",os,d(((r=e.lastSuccessfulPlan)==null?void 0:r.name)||"Your new plan")+" activated ",1),i("p",is," Valid until "+d(e.formatExpiryDate()),1)])])]),n(a(A),null,{default:o(()=>[n(a(w),{onClick:e.goToDashboard},{default:o(()=>s[31]||(s[31]=[u("Go to Dashboard")])),_:1},8,["onClick"])]),_:1})]}),_:1})]),_:1},8,["open"]),n(a(U),{open:e.showRefundDialog,"onUpdate:open":s[8]||(s[8]=r=>e.showRefundDialog=r)},{default:o(()=>[n(a(N),null,{default:o(()=>[n(a(B),null,{default:o(()=>[n(a(F),null,{default:o(()=>s[32]||(s[32]=[u("Request Refund")])),_:1}),n(a(V),null,{default:o(()=>s[33]||(s[33]=[u(" Please provide details for your refund request. Refunds are processed according to our refund policy. ")])),_:1})]),_:1}),i("div",ls,[i("div",us,[n(a(q),{for:"payment"},{default:o(()=>s[34]||(s[34]=[u("Payment")])),_:1}),n(a(Y),{modelValue:e.refundPaymentId,"onUpdate:modelValue":s[5]||(s[5]=r=>e.refundPaymentId=r)},{default:o(()=>[n(a(K),{id:"payment"},{default:o(()=>[n(a(Q),{placeholder:"Select payment"})]),_:1}),n(a(X),null,{default:o(()=>[(l(!0),c(v,null,k(e.refundablePayments,r=>(l(),b(a(S),{key:r.id,value:r.id},{default:o(()=>[u(d(r.amount)+" "+d(r.currency)+" - "+d(e.formatDate(r.createdAt)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),i("div",ds,[n(a(q),{for:"refund-reason"},{default:o(()=>s[35]||(s[35]=[u("Reason for refund")])),_:1}),n(a(G),{id:"refund-reason",modelValue:e.refundReason,"onUpdate:modelValue":s[6]||(s[6]=r=>e.refundReason=r),placeholder:"Please explain why you're requesting a refund"},null,8,["modelValue"])])]),n(a(A),null,{default:o(()=>[n(a(w),{variant:"ghost",onClick:s[7]||(s[7]=r=>e.showRefundDialog=!1)},{default:o(()=>s[36]||(s[36]=[u(" Cancel ")])),_:1}),n(a(w),{onClick:e.handleRefundRequest,disabled:e.refundInProgress||!e.refundPaymentId||!e.refundReason},{default:o(()=>[e.refundInProgress?(l(),b(a(z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):P("",!0),u(" "+d(e.refundInProgress?"Processing...":"Submit Request"),1)]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),n(a(U),{open:e.showSuccessDialog,"onUpdate:open":s[9]||(s[9]=r=>e.showSuccessDialog=r)},{default:o(()=>[n(a(N),{class:"sm:max-w-md text-center"},{default:o(()=>{var r,g,$,_,H,M;return[n(a(B),null,{default:o(()=>[n(a(F),{class:"text-center text-2xl"},{default:o(()=>s[37]||(s[37]=[u("Payment Successful!")])),_:1}),n(a(V),{class:"text-center"},{default:o(()=>s[38]||(s[38]=[u(" Thank you for subscribing to our service. ")])),_:1})]),_:1}),i("div",cs,[i("div",ps,[n(a(x),{class:"h-10 w-10 text-green-600"})]),i("div",fs,[i("h3",ms,d((r=e.lastSuccessfulPlan)==null?void 0:r.name),1),i("p",hs,d((g=e.lastSuccessfulPlan)==null?void 0:g.pricing[0].amount)+" "+d(($=e.lastSuccessfulPlan)==null?void 0:$.pricing[0].currency)+"/"+d(((_=e.lastSuccessfulPlan)==null?void 0:_.pricing[0].interval)||"month"),1)])]),i("div",ys,[s[39]||(s[39]=i("p",{class:"mb-2 font-medium"},"Your subscription includes:",-1)),i("ul",gs,[(l(!0),c(v,null,k((M=(H=e.lastSuccessfulPlan)==null?void 0:H.features)==null?void 0:M.slice(0,3),(ee,se)=>(l(),c("li",{key:se,class:"flex items-center gap-2"},[n(a(x),{class:"h-3 w-3 text-green-600 flex-shrink-0"}),i("span",null,d(ee.name),1)]))),128))])]),n(a(A),null,{default:o(()=>[n(a(w),{class:"w-full",onClick:e.goToDashboard},{default:o(()=>s[40]||(s[40]=[u(" Go to Dashboard ")])),_:1},8,["onClick"])]),_:1})]}),_:1})]),_:1},8,["open"])])}}}),Ds=de(ws,[["__scopeId","data-v-6d426e56"]]);export{Ds as default};
